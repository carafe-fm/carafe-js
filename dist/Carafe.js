var Carafe=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){"use strict";var r,o=n(1);var i=new((r=o)&&r.__esModule?r:{default:r}).default;e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(2),n(6);var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(7));var i=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._version="0.6.0",this._jsonData={},this._metaData={},this._fmBridge=o,this._isFileMakerWebViewer=!1,this}return r(e,[{key:"setData",value:function(e){this._jsonData=e}},{key:"setMetaData",value:function(e){this._metaData=e}},{key:"setIsFileMakerWebViewer",value:function(){this._isFileMakerWebViewer=!0}},{key:"isFileMakerWebViewer",value:function(){return this._isFileMakerWebViewer}},{key:"getData",value:function(){return this._jsonData}},{key:"getMetaData",value:function(){return this._metaData}},{key:"getFMBridge",value:function(){return this._fmBridge}},{key:"ready",value:function(e){var t=this;new Promise(function(e,n){e(t.isFileMakerWebViewer()?void 0:t.fetchLocalFileResources())}).then(function(){return t.loadResources()}).then(function(){head.ready(function(){e(t.getData())})}).catch(function(){console.debug("error fetching metaData from implementationData")})}},{key:"loadResources",value:function(){var e=this.getMetaData();void 0!==e.cdns&&(void 0!==e.cdns.css&&head.load(e.cdns.css),void 0!==e.cdns.js&&head.js(e.cdns.js))}},{key:"fetchLocalFileResources",value:function(){var e=this,t=this.getJsonFromUrl("./exampleJsonData.json").then(function(t){e.setData(t)}),n=this.getJsonFromUrl("./implementationData.json").then(function(t){e.setMetaData(t.metaData)});return Promise.all([t,n]).catch(function(){console.debug("error fetching metaData from implementationData")})}},{key:"getTextFromUrl",value:function(e){return fetch(e).then(function(e){return e.text()}).catch(function(){console.debug("error fetching metaData from builtJs")})}},{key:"getJsonFromUrl",value:function(e){return fetch(e).then(function(e){return e.json()}).catch(function(){console.debug("error fetching json from "+e)})}}]),e}();t.default=i},function(e,t,n){"use strict";e.exports=n(3).polyfill()},function(e,t,n){(function(t,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.6+9869a4bc
 */var r;r=function(){"use strict";function e(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,i=void 0,a=void 0,u=function(e,t){p[o]=e,p[o+1]=t,2===(o+=2)&&(a?a(v):w())},c="undefined"!=typeof window?window:void 0,s=c||{},l=s.MutationObserver||s.WebKitMutationObserver,f="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var e=setTimeout;return function(){return e(v,1)}}var p=new Array(1e3);function v(){for(var e=0;e<o;e+=2){(0,p[e])(p[e+1]),p[e]=void 0,p[e+1]=void 0}o=0}var m,y,g,b,w=void 0;function _(e,t){var n=this,r=new this.constructor(E);void 0===r[j]&&U(r);var o=n._state;if(o){var i=arguments[o-1];u(function(){return N(o,r,i,n._result)})}else F(n,r,e,t);return r}function T(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(E);return L(t,e),t}f?w=function(){return t.nextTick(v)}:l?(y=0,g=new l(v),b=document.createTextNode(""),g.observe(b,{characterData:!0}),w=function(){b.data=y=++y%2}):d?((m=new MessageChannel).port1.onmessage=v,w=function(){return m.port2.postMessage(0)}):w=void 0===c?function(){try{var e=Function("return this")().require("vertx");return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(v)}:h()}catch(e){return h()}}():h();var j=Math.random().toString(36).substring(2);function E(){}var M=void 0,O=1,k=2,D={error:null};function x(e){try{return e.then}catch(e){return D.error=e,D}}function A(t,n,r){n.constructor===t.constructor&&r===_&&n.constructor.resolve===T?function(e,t){t._state===O?C(e,t._result):t._state===k?P(e,t._result):F(t,void 0,function(t){return L(e,t)},function(t){return P(e,t)})}(t,n):r===D?(P(t,D.error),D.error=null):void 0===r?C(t,n):e(r)?function(e,t,n){u(function(e){var r=!1,o=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,function(n){r||(r=!0,t!==n?L(e,n):C(e,n))},function(t){r||(r=!0,P(e,t))},e._label);!r&&o&&(r=!0,P(e,o))},e)}(t,n,r):C(t,n)}function L(e,t){var n,r;e===t?P(e,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=t),null===n||"object"!==r&&"function"!==r?C(e,t):A(e,t,x(t)))}function S(e){e._onerror&&e._onerror(e._result),R(e)}function C(e,t){e._state===M&&(e._result=t,e._state=O,0!==e._subscribers.length&&u(R,e))}function P(e,t){e._state===M&&(e._state=k,e._result=t,u(S,e))}function F(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+O]=n,o[i+k]=r,0===i&&e._state&&u(R,e)}function R(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+n],r?N(n,r,o,i):o(i);e._subscribers.length=0}}function N(t,n,r,o){var i=e(r),a=void 0,u=void 0,c=void 0,s=void 0;if(i){if((a=function(e,t){try{return e(t)}catch(e){return D.error=e,D}}(r,o))===D?(s=!0,u=a.error,a.error=null):c=!0,n===a)return void P(n,new TypeError("A promises callback cannot return that same promise."))}else a=o,c=!0;n._state!==M||(i&&c?L(n,a):s?P(n,u):t===O?C(n,a):t===k&&P(n,a))}var J=0;function U(e){e[j]=J++,e._state=void 0,e._result=void 0,e._subscribers=[]}var B=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(E),this.promise[j]||U(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&C(this.promise,this._result))):P(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===M&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===T){var o=x(e);if(o===_&&e._state!==M)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===W){var i=new n(E);A(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===M&&(this._remaining--,e===k?P(r,n):this._result[t]=n),0===this._remaining&&C(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;F(e,void 0,function(e){return n._settledAt(O,t,e)},function(e){return n._settledAt(k,t,e)})},e}(),W=function(){function t(e){this[j]=J++,this._result=this._state=void 0,this._subscribers=[],E!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t(function(t){L(e,t)},function(t){P(e,t)})}catch(t){P(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var n=this.constructor;return e(t)?this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})}):this.then(t,t)},t}();return W.prototype.then=_,W.all=function(e){return new B(this,e).promise},W.race=function(e){var t=this;return r(e)?new t(function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})},W.resolve=T,W.reject=function(e){var t=new this(E);return P(t,e),t},W._setScheduler=function(e){a=e},W._setAsap=function(e){u=e},W._asap=u,W.polyfill=function(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=W},W.Promise=W,W},e.exports=r()}).call(this,n(4),n(5))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,s=[],l=!1,f=-1;function d(){l&&c&&(l=!1,c.length?s=c.concat(s):f=-1,s.length&&h())}function h(){if(!l){var e=u(d);l=!0;for(var t=s.length;t;){for(c=s,s=[];++f<t;)c&&c[f].run();f=-1,t=s.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new p(e,t)),1!==s.length||l||u(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){
/*! head.load - v1.0.3 */
!function(e,t){"use strict";var n,r=e.document,o=[],i={},a={},u="async"in r.createElement("script")||"MozAppearance"in r.documentElement.style||e.opera,c=e.head_conf&&e.head_conf.head||"head",s=e[c]=e[c]||function(){s.ready.apply(null,arguments)},l=1,f=2,d=3,h=4;function p(){}function v(e,t){if(e){"object"==typeof e&&(e=[].slice.call(e));for(var n=0,r=e.length;n<r;n++)t.call(e,e[n],n)}}function m(e,n){var r=Object.prototype.toString.call(n).slice(8,-1);return n!==t&&null!==n&&r===e}function y(e){return m("Function",e)}function g(e){return m("Array",e)}function b(e){(e=e||p)._done||(e(),e._done=1)}function w(e){var t,n,r,o,i={};if("object"==typeof e)for(var u in e)e[u]&&(i={name:u,url:e[u]});else i={name:(t=e,n=t.split("/"),r=n[n.length-1],o=r.indexOf("?"),-1!==o?r.substring(0,o):r),url:e};var c=a[i.name];return c&&c.url===i.url?c:(a[i.name]=i,i)}function _(e){for(var t in e=e||a)if(e.hasOwnProperty(t)&&e[t].state!==h)return!1;return!0}function T(e,n){e.state===t&&(e.state=l,e.onpreload=[],E({url:e.url,type:"cache"},function(){!function(e){e.state=f,v(e.onpreload,function(e){e.call()})}(e)}))}function j(e,t){t=t||p,e.state!==h?e.state!==d?e.state!==l?(e.state=d,E(e,function(){e.state=h,t(),v(i[e.name],function(e){b(e)}),n&&_()&&v(i.ALL,function(e){b(e)})})):e.onpreload.push(function(){j(e,t)}):s.ready(e.name,t):t()}function E(t,n){function o(t){t=t||e.event,a.onload=a.onreadystatechange=a.onerror=null,n()}function i(o){("load"===(o=o||e.event).type||/loaded|complete/.test(a.readyState)&&(!r.documentMode||r.documentMode<9))&&(e.clearTimeout(t.errorTimeout),e.clearTimeout(t.cssTimeout),a.onload=a.onreadystatechange=a.onerror=null,n())}var a,u,c;n=n||p,"css"===(u=t.url,(c=(u=u||"").split("?")[0].split("."))[c.length-1].toLowerCase())?((a=r.createElement("link")).type="text/"+(t.type||"css"),a.rel="stylesheet",a.href=t.url,t.cssRetries=0,t.cssTimeout=e.setTimeout(function n(){if(t.state!==h&&t.cssRetries<=20){for(var o=0,u=r.styleSheets.length;o<u;o++)if(r.styleSheets[o].href===a.href)return void i({type:"load"});t.cssRetries++,t.cssTimeout=e.setTimeout(n,250)}},500)):((a=r.createElement("script")).type="text/"+(t.type||"javascript"),a.src=t.url),a.onload=a.onreadystatechange=i,a.onerror=o,a.async=!1,a.defer=!1,t.errorTimeout=e.setTimeout(function(){o({type:"timeout"})},7e3);var s=r.head||r.getElementsByTagName("head")[0];s.insertBefore(a,s.lastChild)}function M(){if(!r.body)return e.clearTimeout(s.readyTimeout),void(s.readyTimeout=e.setTimeout(M,50));n||(n=!0,function(){for(var e=r.getElementsByTagName("script"),t=0,n=e.length;t<n;t++){var o=e[t].getAttribute("data-headjs-load");if(o)return void s.load(o)}}(),v(o,function(e){b(e)}))}function O(){r.addEventListener?(r.removeEventListener("DOMContentLoaded",O,!1),M()):"complete"===r.readyState&&(r.detachEvent("onreadystatechange",O),M())}if("complete"===r.readyState)M();else if(r.addEventListener)r.addEventListener("DOMContentLoaded",O,!1),e.addEventListener("load",M,!1);else{r.attachEvent("onreadystatechange",O),e.attachEvent("onload",M);var k=!1;try{k=!e.frameElement&&r.documentElement}catch(e){}k&&k.doScroll&&function t(){if(!n){try{k.doScroll("left")}catch(n){return e.clearTimeout(s.readyTimeout),void(s.readyTimeout=e.setTimeout(t,50))}M()}}()}s.load=s.js=u?function(){var e=arguments,t=e[e.length-1],n={};return y(t)||(t=null),g(e[0])?(e[0].push(t),s.load.apply(null,e[0]),s):(v(e,function(e,r){e!==t&&(e=w(e),n[e.name]=e)}),v(e,function(e,r){e!==t&&j(e=w(e),function(){_(n)&&b(t)})}),s)}:function(){var e=arguments,t=e[e.length-1],n=[].slice.call(e,1),r=n[0];return y(t)||(t=null),g(e[0])?(e[0].push(t),s.load.apply(null,e[0]),s):(r?(v(n,function(e){!y(e)&&e&&T(w(e))}),j(w(e[0]),y(r)?r:function(){s.load.apply(null,n)})):j(w(e[0])),s)},s.test=function(e,t,n,r){var o="object"==typeof e?e:{test:e,success:!!t&&(g(t)?t:[t]),failure:!!n&&(g(n)?n:[n]),callback:r||p},i=!!o.test;return i&&o.success?(o.success.push(o.callback),s.load.apply(null,o.success)):!i&&o.failure?(o.failure.push(o.callback),s.load.apply(null,o.failure)):r(),s},s.ready=function(e,t){if(e===r)return n?b(t):o.push(t),s;if(y(e)&&(t=e,e="ALL"),g(e)){var u={};return v(e,function(e){u[e]=a[e],s.ready(e,function(){_(u)&&b(t)})}),s}if("string"!=typeof e||!y(t))return s;var c=a[e];if(c&&c.state===h||"ALL"===e&&_()&&n)return b(t),s;var l=i[e];return l?l.push(t):l=i[e]=[t],s},s.ready(r,function(){_()&&v(i.ALL,function(e){b(e)}),s.feature&&s.feature("domloaded",!0)})}(window)},function(e,t,n){!function(e){"use strict";function t(e,t){var n=arguments;if(null==e)throw new TypeError("Cannot convert first argument to object");for(var r=Object(e),o=1;o<arguments.length;o++){var i=n[o];if(null!=i)for(var a=Object.keys(Object(i)),u=0,c=a.length;u<c;u++){var s=a[u],l=Object.getOwnPropertyDescriptor(i,s);void 0!==l&&l.enumerable&&(r[s]=i[s])}}return r}var n=function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:t})};window.clipboardData&&(window.onerror=function(e,t,n,r,o){var i=document.createElement("div"),a=document.createElement("h1");a.innerHTML="Error!",i.appendChild(a);var u=document.createElement("p");u.innerHTML=e,i.appendChild(u);var c=document.createElement("p"),s=t.indexOf("#");t=t.substring(0,s),c.innerHTML=t,i.appendChild(c);var l=document.createElement("ul"),f=document.createElement("li");f.innerHTML="line number: "+n,l.appendChild(f);var d=document.createElement("li");d.innerHTML="column number: "+r,l.appendChild(d),i.appendChild(l);var h=document.getElementsByTagName("body")[0];i.setAttribute("style","color:red; font-size:small"),h.appendChild(i)}),n();var r=function(){var e=decodeURIComponent(location.hash.substr(1));try{e=JSON.parse(e)}catch(e){}return console.log("initialProps"),console.log(e),e}(),o=function(e,t,n,r){var o=encodeURIComponent(n);console.log("calling FM script",t),console.log("----\x3efile",e),console.log("----\x3eparameter!",n),o.length>1e3&&window.clipboardData&&(window.clipboardData.setData("Text",n),o="giant");var i="fmp://$/"+e+"?script="+t+"&param="+o,a=window.location.href,u=document.getElementsByTagName("body")[0],c=document.createElement("a");c.href=i,c.style.display="none",u.appendChild(c),c.click(),c.parentNode.removeChild(c),a.indexOf("#")>-1&&setTimeout(function(){window.location.href=a},1)};e.initialProps=r,e.callFMScript=o,e.externalAPI=function(e){void 0===e&&(e={});var t=function(t){console.log("hash changed");var n=decodeURIComponent(location.hash.substr(1));if(window.clipboardData&&"giant"===n&&(n=(n=window.clipboardData.getData("Text")).substr(1)),n){window.location.hash="",n=n.split("h^").join("#"),n=JSON.parse(n),console.log(n);var r=n.function,i=n.parameter;try{i=JSON.parse(i)}catch(e){}var a,u=n.callback&&n.callback.file?n.callback.file:"",c=n.callback&&n.callback.script?n.callback.script:"";console.log("----\x3e function: "+r),console.log("----\x3e parameter:",i),console.log("----\x3e callback:",{file:u,script:c}),a=e[r]?e[r](i):{errorCode:-2,type:"WebViewerAPI",descriptor:"function not found: "+r};var s=function(e){console.log("RESULT",e),c&&("string"==typeof e||e instanceof String||(e=JSON.stringify(e)),o(u,c,e))};return a&&a.then&&"function"==typeof a.then?a.then(s):s(a)}console.log("----\x3e hash was empty")};return{addMethods:function(t){Object.assign(e,t)},start:function(){console.log("webviewer api listening"),window.addEventListener("hashchange",t,!1)},stop:function(){window.removeEventListener("hashchange",t,!1)}}},Object.defineProperty(e,"__esModule",{value:!0})}(t)}]);
//# sourceMappingURL=Carafe.js.map