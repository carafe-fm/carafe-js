{"version":3,"sources":["webpack://Carafe/webpack/bootstrap","webpack://Carafe/./carafe-packages-src/Carafe/Package.js","webpack://Carafe/./es6/lib/Carafe.js","webpack://Carafe/./node_modules/headjs/dist/1.0.0/head.load.js","webpack://Carafe/./node_modules/fm-webviewer-bridge/dist/fm-webviewer-bridge.umd.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_Carafe","instance","Carafe","fmBridge","_classCallCheck","this","_version","_jsonData","_metaData","_fmBridge","_isFileMakerWebViewer","data","callback","_this","Promise","resolve","reject","isFileMakerWebViewer","undefined","fetchLocalFileResources","then","loadResources","head","ready","getData","catch","console","debug","metaData","getMetaData","cdns","css","load","js","_this2","exampleJsonRequest","getJsonFromUrl","response","setData","metaDataRequest","implementationData","setMetaData","all","url","fetch","resp","text","json","win","isDomReady","doc","document","domWaiters","handlers","assets","isAsync","createElement","documentElement","style","opera","headVar","head_conf","api","apply","arguments","PRELOADING","PRELOADED","LOADING","LOADED","noop","each","arr","slice","length","is","type","obj","clas","toString","isFunction","item","isArray","one","_done","getAsset","items","asset","label","split","indexOf","substring","existing","allLoaded","state","preLoad","onpreload","loadAsset","afterPreload","onPreload","fn","ALL","push","error","event","ele","onload","onreadystatechange","onerror","process","test","readyState","documentMode","clearTimeout","errorTimeout","cssTimeout","toLowerCase","rel","href","cssRetries","setTimeout","isCssLoaded","styleSheets","src","async","defer","getElementsByTagName","insertBefore","lastChild","domReady","body","readyTimeout","dataMain","getAttribute","init","domContentLoaded","addEventListener","removeEventListener","detachEvent","attachEvent","top","frameElement","e","doScroll","doScrollCheck","args","rest","next","success","failure","passed","feature","window","assign","target","firstSource","arguments$1","TypeError","to","nextSource","keysArray","keys","nextIndex","len","nextKey","desc","getOwnPropertyDescriptor","es6ObjectAssign_2","configurable","writable","clipboardData","message","source","lineno","colno","errorDiv","title","innerHTML","appendChild","messageP","sourceP","ul","line","col","setAttribute","initialProps","props","decodeURIComponent","location","hash","substr","JSON","parse","log","callFMScript","fileName","scriptName","parameter","encodeURIComponent","a","display","click","parentNode","removeChild","externalAPI","methods","apiListener","join","functionName","function","result","file","script","errorCode","descriptor","handleResult","String","stringify","addMethods","start","stop","factory"],"mappings":"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","file":"Carafe/Carafe.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","\"use strict\";\n\nimport Carafe from '../../es6/lib/Carafe';\n\nconst instance = new Carafe();\nmodule.exports = instance;\n","\"use strict\";\n\nimport 'headjs/dist/1.0.0/head.load';\nimport * as fmBridge from 'fm-webviewer-bridge'\n\nexport default class Carafe {\n    /**\n     * Provides loader, bundler, access to FMBridge.\n     * @returns {Carafe}\n     */\n    constructor() {\n        this._version = '0.6.0';\n        this._jsonData = {};\n        this._metaData = {};\n        this._fmBridge = fmBridge;\n        this._isFileMakerWebViewer = false;\n\n        return this;\n    }\n\n    /**\n     * @param data\n     */\n    setData(data) {\n        this._jsonData = data;\n    }\n\n    /**\n     * @param data\n     */\n    setMetaData(data) {\n        this._metaData = data;\n    }\n\n    /**\n     * Tell carafe that the implementation will be run in a webviewer.\n     * This is used to stop the loading of local resources used for dev/CodeSandbox.\n     */\n    setIsFileMakerWebViewer() {\n        this._isFileMakerWebViewer = true;\n    }\n\n    /**\n     * @returns {boolean}\n     */\n    isFileMakerWebViewer() {\n        return this._isFileMakerWebViewer;\n    }\n\n    /**\n     * @returns {{}|*}\n     */\n    getData() {\n        return this._jsonData;\n    }\n\n    /**\n     * @returns {{}|*}\n     */\n    getMetaData() {\n        return this._metaData;\n    }\n\n    /**\n     * @returns {*}\n     */\n    getFMBridge() {\n        return this._fmBridge;\n    }\n\n    /**\n     * Fetch sparse bundle resources if not in FileMaker.\n     * Load CDN resources.\n     * Setup update bundle callback functions when not in FileMaker\n     * Call the user callback.\n     * @param callback\n     */\n    ready(callback) {\n        new Promise((resolve, reject) => {\n            // fetch example json if needed\n            resolve(this.isFileMakerWebViewer() ? undefined : this.fetchLocalFileResources());\n        }).then(() => {\n            // load CDN resources\n            return this.loadResources();\n        }).then(() => {\n            head.ready(() => {\n                callback(this.getData());\n            });\n        }).catch(function () {\n            console.debug('error fetching metaData from implementationData');\n        });\n    }\n\n    /**\n     * load CDN urls from the metaData into the head loader\n     */\n    loadResources() {\n        const metaData = this.getMetaData();\n\n        if (undefined !== metaData.cdns) {\n            if (undefined !== metaData.cdns.css) {\n                head.load(metaData.cdns.css);\n            }\n\n            if (undefined !== metaData.cdns.js) {\n                head.js(metaData.cdns.js);\n            }\n        }\n    }\n\n    /**\n     * Fetch sparse bundle files for development.\n     * @returns {Promise<[any]>}\n     */\n    fetchLocalFileResources() {\n        const exampleJsonRequest = this.getJsonFromUrl('./exampleJsonData.json')\n            .then((response) => {\n                this.setData(response);\n            });\n\n        const metaDataRequest = this.getJsonFromUrl('./implementationData.json')\n            .then((implementationData) => {\n                // @todo trap for errors?\n                this.setMetaData(implementationData.metaData);\n            });\n\n        return Promise.all([exampleJsonRequest, metaDataRequest])\n            .catch(function () {\n                console.debug('error fetching metaData from implementationData');\n            });\n    }\n\n    /**\n     * Fetch url and convert to text.\n     * @param url\n     * @returns {Promise<string>}\n     */\n    getTextFromUrl(url) {\n        return fetch(url)\n            .then((resp) => resp.text())\n            .catch(function () {\n                console.debug('error fetching metaData from builtJs');\n            });\n    }\n\n    /**\n     * Fetch url and convert to JSON\n     * @param url\n     * @returns {Promise<any>}\n     */\n    getJsonFromUrl(url) {\n        return fetch(url)\n            .then((resp) => resp.json())\n            .catch(function () {\n                console.debug('error fetching json from ' + url);\n            });\n    }\n}\n","///#source 1 1 /src/1.0.0/load.js\n/*! head.load - v1.0.3 */\n/*\n * HeadJS     The only script in your <HEAD>\n * Author     Tero Piirainen  (tipiirai)\n * Maintainer Robert Hoffmann (itechnology)\n * License    MIT / http://bit.ly/mit-license\n * WebSite    http://headjs.com\n */\n(function (win, undefined) {\n    \"use strict\";\n\n    //#region variables\n    var doc        = win.document,\n        domWaiters = [],\n        handlers   = {}, // user functions waiting for events\n        assets     = {}, // loadable items in various states\n        isAsync    = \"async\" in doc.createElement(\"script\") || \"MozAppearance\" in doc.documentElement.style || win.opera,\n        isDomReady,\n\n        /*** public API ***/\n        headVar = win.head_conf && win.head_conf.head || \"head\",\n        api     = win[headVar] = (win[headVar] || function () { api.ready.apply(null, arguments); }),\n\n        // states\n        PRELOADING = 1,\n        PRELOADED  = 2,\n        LOADING    = 3,\n        LOADED     = 4;\n    //#endregion\n\n    //#region PRIVATE functions\n\n    //#region Helper functions\n    function noop() {\n        // does nothing\n    }\n\n    function each(arr, callback) {\n        if (!arr) {\n            return;\n        }\n\n        // arguments special type\n        if (typeof arr === \"object\") {\n            arr = [].slice.call(arr);\n        }\n\n        // do the job\n        for (var i = 0, l = arr.length; i < l; i++) {\n            callback.call(arr, arr[i], i);\n        }\n    }\n\n    /* A must read: http://bonsaiden.github.com/JavaScript-Garden\n     ************************************************************/\n    function is(type, obj) {\n        var clas = Object.prototype.toString.call(obj).slice(8, -1);\n        return obj !== undefined && obj !== null && clas === type;\n    }\n\n    function isFunction(item) {\n        return is(\"Function\", item);\n    }\n\n    function isArray(item) {\n        return is(\"Array\", item);\n    }\n\n    function toLabel(url) {\n        ///<summary>Converts a url to a file label</summary>\n        var items = url.split(\"/\"),\n             name = items[items.length - 1],\n             i    = name.indexOf(\"?\");\n\n        return i !== -1 ? name.substring(0, i) : name;\n    }\n\n    // INFO: this look like a \"im triggering callbacks all over the place, but only wanna run it one time function\" ..should try to make everything work without it if possible\n    // INFO: Even better. Look into promises/defered's like jQuery is doing\n    function one(callback) {\n        ///<summary>Execute a callback only once</summary>\n        callback = callback || noop;\n\n        if (callback._done) {\n            return;\n        }\n\n        callback();\n        callback._done = 1;\n    }\n    //#endregion\n\n    function conditional(test, success, failure, callback) {\n        ///<summary>\n        /// INFO: use cases:\n        ///    head.test(condition, null       , \"file.NOk\" , callback);\n        ///    head.test(condition, \"fileOk.js\", null       , callback);\n        ///    head.test(condition, \"fileOk.js\", \"file.NOk\" , callback);\n        ///    head.test(condition, \"fileOk.js\", [\"file.NOk\", \"file.NOk\"], callback);\n        ///    head.test({\n        ///               test    : condition,\n        ///               success : [{ label1: \"file1Ok.js\"  }, { label2: \"file2Ok.js\" }],\n        ///               failure : [{ label1: \"file1NOk.js\" }, { label2: \"file2NOk.js\" }],\n        ///               callback: callback\n        ///    );\n        ///    head.test({\n        ///               test    : condition,\n        ///               success : [\"file1Ok.js\" , \"file2Ok.js\"],\n        ///               failure : [\"file1NOk.js\", \"file2NOk.js\"],\n        ///               callback: callback\n        ///    );\n        ///</summary>\n        var obj = (typeof test === \"object\") ? test : {\n            test: test,\n            success: !!success ? isArray(success) ? success : [success] : false,\n            failure: !!failure ? isArray(failure) ? failure : [failure] : false,\n            callback: callback || noop\n        };\n\n        // Test Passed ?\n        var passed = !!obj.test;\n\n        // Do we have a success case\n        if (passed && !!obj.success) {\n            obj.success.push(obj.callback);\n            api.load.apply(null, obj.success);\n        }\n        // Do we have a fail case\n        else if (!passed && !!obj.failure) {\n            obj.failure.push(obj.callback);\n            api.load.apply(null, obj.failure);\n        }\n        else {\n            callback();\n        }\n\n        return api;\n    }\n\n    function getAsset(item) {\n        ///<summary>\n        /// Assets are in the form of\n        /// {\n        ///     name : label,\n        ///     url  : url,\n        ///     state: state\n        /// }\n        ///</summary>\n        var asset = {};\n\n        if (typeof item === \"object\") {\n            for (var label in item) {\n                if (!!item[label]) {\n                    asset = {\n                        name: label,\n                        url : item[label]\n                    };\n                }\n            }\n        }\n        else {\n            asset = {\n                name: toLabel(item),\n                url : item\n            };\n        }\n\n        // is the item already existant\n        var existing = assets[asset.name];\n        if (existing && existing.url === asset.url) {\n            return existing;\n        }\n\n        assets[asset.name] = asset;\n        return asset;\n    }\n\n    function allLoaded(items) {\n        items = items || assets;\n\n        for (var name in items) {\n            if (items.hasOwnProperty(name) && items[name].state !== LOADED) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    function onPreload(asset) {\n        asset.state = PRELOADED;\n\n        each(asset.onpreload, function (afterPreload) {\n            afterPreload.call();\n        });\n    }\n\n    function preLoad(asset, callback) {\n        if (asset.state === undefined) {\n\n            asset.state     = PRELOADING;\n            asset.onpreload = [];\n\n            loadAsset({ url: asset.url, type: \"cache\" }, function () {\n                onPreload(asset);\n            });\n        }\n    }\n\n    function apiLoadHack() {\n        /// <summary>preload with text/cache hack\n        ///\n        /// head.load(\"http://domain.com/file.js\",\"http://domain.com/file.js\", callBack)\n        /// head.load([\"http://domain.com/file.js\",\"http://domain.com/file.js\"], callBack)\n        /// head.load({ label1: \"http://domain.com/file.js\" }, { label2: \"http://domain.com/file.js\" }, callBack)\n        /// head.load([{ label1: \"http://domain.com/file.js\" }, { label2: \"http://domain.com/file.js\" }], callBack)\n        /// </summary>\n        var args     = arguments,\n            callback = args[args.length - 1],\n            rest     = [].slice.call(args, 1),\n            next     = rest[0];\n\n        if (!isFunction(callback)) {\n            callback = null;\n        }\n\n        // if array, repush as args\n        if (isArray(args[0])) {\n            args[0].push(callback);\n            api.load.apply(null, args[0]);\n\n            return api;\n        }\n\n        // multiple arguments\n        if (!!next) {\n            /* Preload with text/cache hack (not good!)\n             * http://blog.getify.com/on-script-loaders/\n             * http://www.nczonline.net/blog/2010/12/21/thoughts-on-script-loaders/\n             * If caching is not configured correctly on the server, then items could load twice !\n             *************************************************************************************/\n            each(rest, function (item) {\n                // item is not a callback or empty string\n                if (!isFunction(item) && !!item) {\n                    preLoad(getAsset(item));\n                }\n            });\n\n            // execute\n            load(getAsset(args[0]), isFunction(next) ? next : function () {\n                api.load.apply(null, rest);\n            });\n        }\n        else {\n            // single item\n            load(getAsset(args[0]));\n        }\n\n        return api;\n    }\n\n    function apiLoadAsync() {\n        ///<summary>\n        /// simply load and let browser take care of ordering\n        ///\n        /// head.load(\"http://domain.com/file.js\",\"http://domain.com/file.js\", callBack)\n        /// head.load([\"http://domain.com/file.js\",\"http://domain.com/file.js\"], callBack)\n        /// head.load({ label1: \"http://domain.com/file.js\" }, { label2: \"http://domain.com/file.js\" }, callBack)\n        /// head.load([{ label1: \"http://domain.com/file.js\" }, { label2: \"http://domain.com/file.js\" }], callBack)\n        ///</summary>\n        var args     = arguments,\n            callback = args[args.length - 1],\n            items    = {};\n\n        if (!isFunction(callback)) {\n            callback = null;\n        }\n\n        // if array, repush as args\n        if (isArray(args[0])) {\n            args[0].push(callback);\n            api.load.apply(null, args[0]);\n\n            return api;\n        }\n\n        // JRH 262#issuecomment-26288601\n        // First populate the items array.\n        // When allLoaded is called, all items will be populated.\n        // Issue when lazy loaded, the callback can execute early.\n        each(args, function (item, i) {\n            if (item !== callback) {\n                item             = getAsset(item);\n                items[item.name] = item;\n            }\n        });\n\n        each(args, function (item, i) {\n            if (item !== callback) {\n                item = getAsset(item);\n\n                load(item, function () {\n                    if (allLoaded(items)) {\n                        one(callback);\n                    }\n                });\n            }\n        });\n\n        return api;\n    }\n\n    function load(asset, callback) {\n        ///<summary>Used with normal loading logic</summary>\n        callback = callback || noop;\n\n        if (asset.state === LOADED) {\n            callback();\n            return;\n        }\n\n        // INFO: why would we trigger a ready event when its not really loaded yet ?\n        if (asset.state === LOADING) {\n            api.ready(asset.name, callback);\n            return;\n        }\n\n        if (asset.state === PRELOADING) {\n            asset.onpreload.push(function () {\n                load(asset, callback);\n            });\n            return;\n        }\n\n        asset.state = LOADING;\n\n        loadAsset(asset, function () {\n            asset.state = LOADED;\n\n            callback();\n\n            // handlers for this asset\n            each(handlers[asset.name], function (fn) {\n                one(fn);\n            });\n\n            // dom is ready & no assets are queued for loading\n            // INFO: shouldn't we be doing the same test above ?\n            if (isDomReady && allLoaded()) {\n                each(handlers.ALL, function (fn) {\n                    one(fn);\n                });\n            }\n        });\n    }\n\n    function getExtension(url) {\n        url = url || \"\";\n\n        var items = url.split(\"?\")[0].split(\".\");\n        return items[items.length-1].toLowerCase();\n    }\n\n    /* Parts inspired from: https://github.com/cujojs/curl\n    ******************************************************/\n    function loadAsset(asset, callback) {\n        callback = callback || noop;\n\n        function error(event) {\n            event = event || win.event;\n\n            // release event listeners\n            ele.onload = ele.onreadystatechange = ele.onerror = null;\n\n            // do callback\n            callback();\n\n            // need some more detailed error handling here\n        }\n\n        function process(event) {\n            event = event || win.event;\n\n            // IE 7/8 (2 events on 1st load)\n            // 1) event.type = readystatechange, s.readyState = loading\n            // 2) event.type = readystatechange, s.readyState = loaded\n\n            // IE 7/8 (1 event on reload)\n            // 1) event.type = readystatechange, s.readyState = complete\n\n            // event.type === 'readystatechange' && /loaded|complete/.test(s.readyState)\n\n            // IE 9 (3 events on 1st load)\n            // 1) event.type = readystatechange, s.readyState = loading\n            // 2) event.type = readystatechange, s.readyState = loaded\n            // 3) event.type = load            , s.readyState = loaded\n\n            // IE 9 (2 events on reload)\n            // 1) event.type = readystatechange, s.readyState = complete\n            // 2) event.type = load            , s.readyState = complete\n\n            // event.type === 'load'             && /loaded|complete/.test(s.readyState)\n            // event.type === 'readystatechange' && /loaded|complete/.test(s.readyState)\n\n            // IE 10 (3 events on 1st load)\n            // 1) event.type = readystatechange, s.readyState = loading\n            // 2) event.type = load            , s.readyState = complete\n            // 3) event.type = readystatechange, s.readyState = loaded\n\n            // IE 10 (3 events on reload)\n            // 1) event.type = readystatechange, s.readyState = loaded\n            // 2) event.type = load            , s.readyState = complete\n            // 3) event.type = readystatechange, s.readyState = complete\n\n            // event.type === 'load'             && /loaded|complete/.test(s.readyState)\n            // event.type === 'readystatechange' && /complete/.test(s.readyState)\n\n            // Other Browsers (1 event on 1st load)\n            // 1) event.type = load, s.readyState = undefined\n\n            // Other Browsers (1 event on reload)\n            // 1) event.type = load, s.readyState = undefined\n\n            // event.type == 'load' && s.readyState = undefined\n\n            // !doc.documentMode is for IE6/7, IE8+ have documentMode\n            if (event.type === \"load\" || (/loaded|complete/.test(ele.readyState) && (!doc.documentMode || doc.documentMode < 9))) {\n                // remove timeouts\n                win.clearTimeout(asset.errorTimeout);\n                win.clearTimeout(asset.cssTimeout);\n\n                // release event listeners\n                ele.onload = ele.onreadystatechange = ele.onerror = null;\n\n                // do callback   \n                callback();\n            }\n        }\n\n        function isCssLoaded() {\n            // should we test again ? 20 retries = 5secs ..after that, the callback will be triggered by the error handler at 7secs\n            if (asset.state !== LOADED && asset.cssRetries <= 20) {\n\n                // loop through stylesheets\n                for (var i = 0, l = doc.styleSheets.length; i < l; i++) {\n                    // do we have a match ?\n                    // we need to tests agains ele.href and not asset.url, because a local file will be assigned the full http path on a link element\n                    if (doc.styleSheets[i].href === ele.href) {\n                        process({ \"type\": \"load\" });\n                        return;\n                    }\n                }\n\n                // increment & try again\n                asset.cssRetries++;\n                asset.cssTimeout = win.setTimeout(isCssLoaded, 250);\n            }\n        }\n\n        var ele;\n        var ext = getExtension(asset.url);\n\n        if (ext === \"css\") {\n            ele      = doc.createElement(\"link\");\n            ele.type = \"text/\" + (asset.type || \"css\");\n            ele.rel  = \"stylesheet\";\n            ele.href = asset.url;\n\n            /* onload supported for CSS on unsupported browsers\n             * Safari windows 5.1.7, FF < 10\n             */\n\n            // Set counter to zero\n            asset.cssRetries = 0;\n            asset.cssTimeout = win.setTimeout(isCssLoaded, 500);         \n        }\n        else {\n            ele      = doc.createElement(\"script\");\n            ele.type = \"text/\" + (asset.type || \"javascript\");\n            ele.src = asset.url;\n        }\n\n        ele.onload  = ele.onreadystatechange = process;\n        ele.onerror = error;\n\n        /* Good read, but doesn't give much hope !\n         * http://blog.getify.com/on-script-loaders/\n         * http://www.nczonline.net/blog/2010/12/21/thoughts-on-script-loaders/\n         * https://hacks.mozilla.org/2009/06/defer/\n         */\n\n        // ASYNC: load in parallel and execute as soon as possible\n        ele.async = false;\n        // DEFER: load in parallel but maintain execution order\n        ele.defer = false;\n\n        // timout for asset loading\n        asset.errorTimeout = win.setTimeout(function () {\n            error({ type: \"timeout\" });\n        }, 7e3);\n\n        // use insertBefore to keep IE from throwing Operation Aborted (thx Bryan Forbes!)\n        var head = doc.head || doc.getElementsByTagName(\"head\")[0];\n\n        // but insert at end of head, because otherwise if it is a stylesheet, it will not override values      \n        head.insertBefore(ele, head.lastChild);\n    }\n\n    /* Parts inspired from: https://github.com/jrburke/requirejs\n    ************************************************************/\n    function init() {\n        var items = doc.getElementsByTagName(\"script\");\n\n        // look for a script with a data-head-init attribute\n        for (var i = 0, l = items.length; i < l; i++) {\n            var dataMain = items[i].getAttribute(\"data-headjs-load\");\n            if (!!dataMain) {\n                api.load(dataMain);\n                return;\n            }\n        }\n    }\n\n    function ready(key, callback) {\n        ///<summary>\n        /// INFO: use cases:\n        ///    head.ready(callBack);\n        ///    head.ready(document , callBack);\n        ///    head.ready(\"file.js\", callBack);\n        ///    head.ready(\"label\"  , callBack);\n        ///    head.ready([\"label1\", \"label2\"], callback);\n        ///</summary>\n\n        // DOM ready check: head.ready(document, function() { });\n        if (key === doc) {\n            if (isDomReady) {\n                one(callback);\n            }\n            else {\n                domWaiters.push(callback);\n            }\n\n            return api;\n        }\n\n        // shift arguments\n        if (isFunction(key)) {\n            callback = key;\n            key      = \"ALL\"; // holds all callbacks that where added without labels: ready(callBack)\n        }\n\n        // queue all items from key and return. The callback will be executed if all items from key are already loaded.\n        if (isArray(key)) {\n            var items = {};\n\n            each(key, function (item) {\n                items[item] = assets[item];\n\n                api.ready(item, function() {\n                    if (allLoaded(items)) {\n                        one(callback);\n                    }\n                });\n            });\n\n            return api;\n        }\n\n        // make sure arguments are sane\n        if (typeof key !== \"string\" || !isFunction(callback)) {\n            return api;\n        }\n\n        // this can also be called when we trigger events based on filenames & labels\n        var asset = assets[key];\n\n        // item already loaded --> execute and return\n        if (asset && asset.state === LOADED || key === \"ALL\" && allLoaded() && isDomReady) {\n            one(callback);\n            return api;\n        }\n\n        var arr = handlers[key];\n        if (!arr) {\n            arr = handlers[key] = [callback];\n        }\n        else {\n            arr.push(callback);\n        }\n\n        return api;\n    }\n\n    /* Mix of stuff from jQuery & IEContentLoaded\n     * http://dev.w3.org/html5/spec/the-end.html#the-end\n     ***************************************************/\n    function domReady() {\n        // Make sure body exists, at least, in case IE gets a little overzealous (jQuery ticket #5443).\n        if (!doc.body) {\n            // let's not get nasty by setting a timeout too small.. (loop mania guaranteed if assets are queued)\n            win.clearTimeout(api.readyTimeout);\n            api.readyTimeout = win.setTimeout(domReady, 50);\n            return;\n        }\n\n        if (!isDomReady) {\n            isDomReady = true;\n\n            init();\n            each(domWaiters, function (fn) {\n                one(fn);\n            });\n        }\n    }\n\n    function domContentLoaded() {\n        // W3C\n        if (doc.addEventListener) {\n            doc.removeEventListener(\"DOMContentLoaded\", domContentLoaded, false);\n            domReady();\n        }\n\n        // IE\n        else if (doc.readyState === \"complete\") {\n            // we're here because readyState === \"complete\" in oldIE\n            // which is good enough for us to call the dom ready!\n            doc.detachEvent(\"onreadystatechange\", domContentLoaded);\n            domReady();\n        }\n    }\n\n    // Catch cases where ready() is called after the browser event has already occurred.\n    // we once tried to use readyState \"interactive\" here, but it caused issues like the one\n    // discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15\n    if (doc.readyState === \"complete\") {\n        domReady();\n    }\n\n    // W3C\n    else if (doc.addEventListener) {\n        doc.addEventListener(\"DOMContentLoaded\", domContentLoaded, false);\n\n        // A fallback to window.onload, that will always work\n        win.addEventListener(\"load\", domReady, false);\n    }\n\n    // IE\n    else {\n        // Ensure firing before onload, maybe late but safe also for iframes\n        doc.attachEvent(\"onreadystatechange\", domContentLoaded);\n\n        // A fallback to window.onload, that will always work\n        win.attachEvent(\"onload\", domReady);\n\n        // If IE and not a frame\n        // continually check to see if the document is ready\n        var top = false;\n\n        try {\n            top = !win.frameElement && doc.documentElement;\n        } catch (e) { }\n\n        if (top && top.doScroll) {\n            (function doScrollCheck() {\n                if (!isDomReady) {\n                    try {\n                        // Use the trick by Diego Perini\n                        // http://javascript.nwbox.com/IEContentLoaded/\n                        top.doScroll(\"left\");\n                    } catch (error) {\n                        // let's not get nasty by setting a timeout too small.. (loop mania guaranteed if assets are queued)\n                        win.clearTimeout(api.readyTimeout);\n                        api.readyTimeout = win.setTimeout(doScrollCheck, 50);\n                        return;\n                    }\n\n                    // and execute any waiting functions\n                    domReady();\n                }\n            }());\n        }\n    }\n    //#endregion\n\n    //#region Public Exports\n    // INFO: determine which method to use for loading\n    api.load  = api.js = isAsync ? apiLoadAsync : apiLoadHack;\n    api.test  = conditional;\n    api.ready = ready;\n    //#endregion\n\n    //#region INIT\n    // perform this when DOM is ready\n    api.ready(doc, function () {\n        if (allLoaded()) {\n            each(handlers.ALL, function (callback) {\n                one(callback);\n            });\n        }\n\n        if (api.feature) {\n            api.feature(\"domloaded\", true);\n        }\n    });\n    //#endregion\n}(window));\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.fm = {})));\n}(this, (function (exports) { 'use strict';\n\n  var attach = function () {\n    if (window.clipboardData) {\n      window.onerror = function(message, source, lineno, colno, error) {\n        var errorDiv = document.createElement(\"div\");\n        var title = document.createElement(\"h1\");\n        title.innerHTML = \"Error!\";\n        errorDiv.appendChild(title);\n        var messageP = document.createElement(\"p\");\n        messageP.innerHTML = message;\n        errorDiv.appendChild(messageP);\n        var sourceP = document.createElement(\"p\");\n        var n = source.indexOf(\"#\");\n        source = source.substring(0, n);\n        sourceP.innerHTML = source;\n        errorDiv.appendChild(sourceP);\n\n        var ul = document.createElement(\"ul\");\n        var line = document.createElement(\"li\");\n        line.innerHTML = \"line number: \" + lineno;\n        ul.appendChild(line);\n\n        var col = document.createElement(\"li\");\n        col.innerHTML = \"column number: \" + colno;\n        ul.appendChild(col);\n        errorDiv.appendChild(ul);\n        var body = document.getElementsByTagName(\"body\")[0];\n        errorDiv.setAttribute(\"style\", \"color:red; font-size:small\");\n        body.appendChild(errorDiv);\n      };\n    }\n  };\n\n  /**\n   * Code refactored from Mozilla Developer Network:\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n   */\n\n  function assign(target, firstSource) {\n    var arguments$1 = arguments;\n\n    if (target === undefined || target === null) {\n      throw new TypeError('Cannot convert first argument to object');\n    }\n\n    var to = Object(target);\n    for (var i = 1; i < arguments.length; i++) {\n      var nextSource = arguments$1[i];\n      if (nextSource === undefined || nextSource === null) {\n        continue;\n      }\n\n      var keysArray = Object.keys(Object(nextSource));\n      for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\n        var nextKey = keysArray[nextIndex];\n        var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n        if (desc !== undefined && desc.enumerable) {\n          to[nextKey] = nextSource[nextKey];\n        }\n      }\n    }\n    return to;\n  }\n\n  function polyfill() {\n    if (!Object.assign) {\n      Object.defineProperty(Object, 'assign', {\n        enumerable: false,\n        configurable: true,\n        writable: true,\n        value: assign\n      });\n    }\n  }\n\n  var es6ObjectAssign = {\n    assign: assign,\n    polyfill: polyfill\n  };\n  var es6ObjectAssign_2 = es6ObjectAssign.polyfill;\n\n  //attatch a windows error handler to make it easier to see errors on windows\n  attach();\n  es6ObjectAssign_2();\n\n  /**\n   * returns the props attached at startup\n   */\n  var initialProps = (function () {\n    var props = decodeURIComponent(location.hash.substr(1));\n    try {\n      props = JSON.parse(props);\n    } catch (e) {}\n    console.log(\"initialProps\");\n    console.log(props);\n    return props;\n  })();\n\n  /**\n   * @param {string} fileName the name of the file that has the script\n   * @param {string} scriptName the name ofthe script to call\n   * @param {object|string} data an object or string containing the data to send as the parameter\n   */\n  var callFMScript = function (fileName, scriptName, data, callback) {\n    var parameter = encodeURIComponent(data);\n    console.log(\"calling FM script\", scriptName);\n    console.log(\"---->file\", fileName);\n    console.log(\"---->parameter!\", data);\n\n    if (parameter.length > 1000 && window.clipboardData) {\n      window.clipboardData.setData(\"Text\", data);\n      parameter = \"giant\";\n    }\n\n    var url =\n      \"fmp://$/\" + fileName + \"?script=\" + scriptName + \"&param=\" + parameter;\n\n    //window.location = url;\n    var href = window.location.href;\n    var body = document.getElementsByTagName(\"body\")[0];\n    var a = document.createElement(\"a\");\n    a.href = url;\n    a.style.display = \"none\";\n    body.appendChild(a);\n    a.click();\n    a.parentNode.removeChild(a);\n\n    //IE FIX\n    if (href.indexOf(\"#\") > -1) {\n      setTimeout(function() {\n        window.location.href = href;\n      }, 1);\n    }\n  };\n\n  /**\n   * Turns the API on\n   * @param {object} [methods={}] object containing a key for each function to expose\n   */\n  var externalAPI = function (methods) {\n    if ( methods === void 0 ) methods = {};\n\n    var apiListener = function (event) {\n      console.log(\"hash changed\");\n      // eslint-disable-next-line no-restricted-globals\n      var hash = decodeURIComponent(location.hash.substr(1));\n      if (window.clipboardData && hash === \"giant\") {\n        hash = window.clipboardData.getData(\"Text\");\n        hash = hash.substr(1);\n      }\n\n      if (!hash) {\n        console.log(\"----> hash was empty\");\n        return;\n      }\n      //const href = window.location.href;\n\n      window.location.hash = \"\"; // clear this for the next call\n\n      hash = hash.split(\"h^\").join(\"#\");\n      hash = JSON.parse(hash);\n      console.log(hash);\n\n      var functionName = hash.function;\n\n      var parameter = hash.parameter;\n      try {\n        parameter = JSON.parse(parameter);\n      } catch (e) {}\n      var file = hash.callback\n        ? hash.callback.file ? hash.callback.file : \"\"\n        : \"\";\n      var script = hash.callback\n        ? hash.callback.script ? hash.callback.script : \"\"\n        : \"\";\n\n      console.log(\"----> function: \" + functionName);\n      console.log(\"----> parameter:\", parameter);\n      console.log(\"----> callback:\", { file: file, script: script });\n      var result;\n      if (methods[functionName]) {\n        result = methods[functionName](parameter);\n      } else {\n        result = {\n          errorCode: -2,\n          type: \"WebViewerAPI\",\n          descriptor: \"function not found: \" + functionName\n        };\n      }\n\n      var handleResult = function (result) {\n        console.log(\"RESULT\", result);\n        if (script) {\n          if (typeof result === \"string\" || result instanceof String) {\n            //no-op\n          } else {\n            result = JSON.stringify(result);\n          }\n\n          callFMScript(file, script, result);\n        }\n      };\n\n      if (result && result.then && typeof result.then === \"function\") {\n        // the result was a promise\n        return result.then(handleResult);\n      } else {\n        return handleResult(result);\n      }\n    };\n    return {\n      /**\n       * add more methods to the API\n       * @param {object} object an object with keys for each function/method to add\n       */\n      addMethods: function (object) {\n        Object.assign(methods, object);\n      },\n      /**\n       * start the API listening for events on Hash change\n       */\n      start: function () {\n        // eslint-disable-next-line no-restricted-globals\n        console.log(\"webviewer api listening\");\n        window.addEventListener(\"hashchange\", apiListener, false);\n      },\n      /**\n       * remove the listeners\n       */\n      stop: function () {\n        // eslint-disable-next-line no-restricted-globals\n        window.removeEventListener(\"hashchange\", apiListener, false);\n      }\n    };\n  };\n\n  exports.initialProps = initialProps;\n  exports.callFMScript = callFMScript;\n  exports.externalAPI = externalAPI;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n"],"sourceRoot":""}