var Carafe=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){"use strict";var r,o=n(1);var a=new((r=o)&&r.__esModule?r:{default:r}).default;e.exports=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(5);var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(6));var a=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._version="0.6.0",this._jsonData={},this._metaData={},this._fmBridge=o,this._isFileMakerWebViewer=!1,this}return r(e,[{key:"setData",value:function(e){this._jsonData=e}},{key:"setMetaData",value:function(e){this._metaData=e}},{key:"setIsFileMakerWebViewer",value:function(){this._isFileMakerWebViewer=!0}},{key:"isFileMakerWebViewer",value:function(){return this._isFileMakerWebViewer}},{key:"getData",value:function(){return this._jsonData}},{key:"getMetaData",value:function(){return this._metaData}},{key:"getFMBridge",value:function(){return this._fmBridge}},{key:"ready",value:function(e){var t=this;new Promise(function(e,n){e(t.isFileMakerWebViewer()?void 0:t.fetchLocalFileResources())}).then(function(){return t.loadResources()}).then(function(){head.ready(function(){e(t.getData())})}).catch(function(){console.debug("error fetching metaData from implementationData")})}},{key:"loadResources",value:function(){var e=this.getMetaData();void 0!==e.cdns&&(void 0!==e.cdns.css&&head.load(e.cdns.css),void 0!==e.cdns.js&&head.js(e.cdns.js))}},{key:"fetchLocalFileResources",value:function(){var e=this,t=this.getJsonFromUrl("./exampleJsonData.json").then(function(t){e.setData(t)}),n=this.getJsonFromUrl("./implementationData.json").then(function(t){e.setMetaData(t.metaData)});return Promise.all([t,n]).catch(function(){console.debug("error fetching metaData from implementationData")})}},{key:"getTextFromUrl",value:function(e){return fetch(e).then(function(e){return e.text()}).catch(function(){console.debug("error fetching metaData from builtJs")})}},{key:"getJsonFromUrl",value:function(e){return fetch(e).then(function(e){return e.json()}).catch(function(){console.debug("error fetching json from "+e)})}}]),e}();t.default=a},,,,function(e,t){
/*! head.load - v1.0.3 */
!function(e,t){"use strict";var n,r=e.document,o=[],a={},i={},c="async"in r.createElement("script")||"MozAppearance"in r.documentElement.style||e.opera,l=e.head_conf&&e.head_conf.head||"head",u=e[l]=e[l]||function(){u.ready.apply(null,arguments)},s=1,f=2,d=3,p=4;function h(){}function m(e,t){if(e){"object"==typeof e&&(e=[].slice.call(e));for(var n=0,r=e.length;n<r;n++)t.call(e,e[n],n)}}function v(e,n){var r=Object.prototype.toString.call(n).slice(8,-1);return n!==t&&null!==n&&r===e}function y(e){return v("Function",e)}function g(e){return v("Array",e)}function b(e){(e=e||h)._done||(e(),e._done=1)}function w(e){var t,n,r,o,a={};if("object"==typeof e)for(var c in e)e[c]&&(a={name:c,url:e[c]});else a={name:(t=e,n=t.split("/"),r=n[n.length-1],o=r.indexOf("?"),-1!==o?r.substring(0,o):r),url:e};var l=i[a.name];return l&&l.url===a.url?l:(i[a.name]=a,a)}function j(e){for(var t in e=e||i)if(e.hasOwnProperty(t)&&e[t].state!==p)return!1;return!0}function T(e,n){e.state===t&&(e.state=s,e.onpreload=[],D({url:e.url,type:"cache"},function(){!function(e){e.state=f,m(e.onpreload,function(e){e.call()})}(e)}))}function k(e,t){t=t||h,e.state!==p?e.state!==d?e.state!==s?(e.state=d,D(e,function(){e.state=p,t(),m(a[e.name],function(e){b(e)}),n&&j()&&m(a.ALL,function(e){b(e)})})):e.onpreload.push(function(){k(e,t)}):u.ready(e.name,t):t()}function D(t,n){function o(t){t=t||e.event,i.onload=i.onreadystatechange=i.onerror=null,n()}function a(o){("load"===(o=o||e.event).type||/loaded|complete/.test(i.readyState)&&(!r.documentMode||r.documentMode<9))&&(e.clearTimeout(t.errorTimeout),e.clearTimeout(t.cssTimeout),i.onload=i.onreadystatechange=i.onerror=null,n())}var i,c,l;n=n||h,"css"===(c=t.url,(l=(c=c||"").split("?")[0].split("."))[l.length-1].toLowerCase())?((i=r.createElement("link")).type="text/"+(t.type||"css"),i.rel="stylesheet",i.href=t.url,t.cssRetries=0,t.cssTimeout=e.setTimeout(function n(){if(t.state!==p&&t.cssRetries<=20){for(var o=0,c=r.styleSheets.length;o<c;o++)if(r.styleSheets[o].href===i.href)return void a({type:"load"});t.cssRetries++,t.cssTimeout=e.setTimeout(n,250)}},500)):((i=r.createElement("script")).type="text/"+(t.type||"javascript"),i.src=t.url),i.onload=i.onreadystatechange=a,i.onerror=o,i.async=!1,i.defer=!1,t.errorTimeout=e.setTimeout(function(){o({type:"timeout"})},7e3);var u=r.head||r.getElementsByTagName("head")[0];u.insertBefore(i,u.lastChild)}function E(){if(!r.body)return e.clearTimeout(u.readyTimeout),void(u.readyTimeout=e.setTimeout(E,50));n||(n=!0,function(){for(var e=r.getElementsByTagName("script"),t=0,n=e.length;t<n;t++){var o=e[t].getAttribute("data-headjs-load");if(o)return void u.load(o)}}(),m(o,function(e){b(e)}))}function M(){r.addEventListener?(r.removeEventListener("DOMContentLoaded",M,!1),E()):"complete"===r.readyState&&(r.detachEvent("onreadystatechange",M),E())}if("complete"===r.readyState)E();else if(r.addEventListener)r.addEventListener("DOMContentLoaded",M,!1),e.addEventListener("load",E,!1);else{r.attachEvent("onreadystatechange",M),e.attachEvent("onload",E);var O=!1;try{O=!e.frameElement&&r.documentElement}catch(e){}O&&O.doScroll&&function t(){if(!n){try{O.doScroll("left")}catch(n){return e.clearTimeout(u.readyTimeout),void(u.readyTimeout=e.setTimeout(t,50))}E()}}()}u.load=u.js=c?function(){var e=arguments,t=e[e.length-1],n={};return y(t)||(t=null),g(e[0])?(e[0].push(t),u.load.apply(null,e[0]),u):(m(e,function(e,r){e!==t&&(e=w(e),n[e.name]=e)}),m(e,function(e,r){e!==t&&k(e=w(e),function(){j(n)&&b(t)})}),u)}:function(){var e=arguments,t=e[e.length-1],n=[].slice.call(e,1),r=n[0];return y(t)||(t=null),g(e[0])?(e[0].push(t),u.load.apply(null,e[0]),u):(r?(m(n,function(e){!y(e)&&e&&T(w(e))}),k(w(e[0]),y(r)?r:function(){u.load.apply(null,n)})):k(w(e[0])),u)},u.test=function(e,t,n,r){var o="object"==typeof e?e:{test:e,success:!!t&&(g(t)?t:[t]),failure:!!n&&(g(n)?n:[n]),callback:r||h},a=!!o.test;return a&&o.success?(o.success.push(o.callback),u.load.apply(null,o.success)):!a&&o.failure?(o.failure.push(o.callback),u.load.apply(null,o.failure)):r(),u},u.ready=function(e,t){if(e===r)return n?b(t):o.push(t),u;if(y(e)&&(t=e,e="ALL"),g(e)){var c={};return m(e,function(e){c[e]=i[e],u.ready(e,function(){j(c)&&b(t)})}),u}if("string"!=typeof e||!y(t))return u;var l=i[e];if(l&&l.state===p||"ALL"===e&&j()&&n)return b(t),u;var s=a[e];return s?s.push(t):s=a[e]=[t],u},u.ready(r,function(){j()&&m(a.ALL,function(e){b(e)}),u.feature&&u.feature("domloaded",!0)})}(window)},function(e,t,n){!function(e){"use strict";function t(e,t){var n=arguments;if(null==e)throw new TypeError("Cannot convert first argument to object");for(var r=Object(e),o=1;o<arguments.length;o++){var a=n[o];if(null!=a)for(var i=Object.keys(Object(a)),c=0,l=i.length;c<l;c++){var u=i[c],s=Object.getOwnPropertyDescriptor(a,u);void 0!==s&&s.enumerable&&(r[u]=a[u])}}return r}var n=function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:t})};window.clipboardData&&(window.onerror=function(e,t,n,r,o){var a=document.createElement("div"),i=document.createElement("h1");i.innerHTML="Error!",a.appendChild(i);var c=document.createElement("p");c.innerHTML=e,a.appendChild(c);var l=document.createElement("p"),u=t.indexOf("#");t=t.substring(0,u),l.innerHTML=t,a.appendChild(l);var s=document.createElement("ul"),f=document.createElement("li");f.innerHTML="line number: "+n,s.appendChild(f);var d=document.createElement("li");d.innerHTML="column number: "+r,s.appendChild(d),a.appendChild(s);var p=document.getElementsByTagName("body")[0];a.setAttribute("style","color:red; font-size:small"),p.appendChild(a)}),n();var r=function(){var e=decodeURIComponent(location.hash.substr(1));try{e=JSON.parse(e)}catch(e){}return console.log("initialProps"),console.log(e),e}(),o=function(e,t,n,r){var o=encodeURIComponent(n);console.log("calling FM script",t),console.log("----\x3efile",e),console.log("----\x3eparameter!",n),o.length>1e3&&window.clipboardData&&(window.clipboardData.setData("Text",n),o="giant");var a="fmp://$/"+e+"?script="+t+"&param="+o,i=window.location.href,c=document.getElementsByTagName("body")[0],l=document.createElement("a");l.href=a,l.style.display="none",c.appendChild(l),l.click(),l.parentNode.removeChild(l),i.indexOf("#")>-1&&setTimeout(function(){window.location.href=i},1)};e.initialProps=r,e.callFMScript=o,e.externalAPI=function(e){void 0===e&&(e={});var t=function(t){console.log("hash changed");var n=decodeURIComponent(location.hash.substr(1));if(window.clipboardData&&"giant"===n&&(n=(n=window.clipboardData.getData("Text")).substr(1)),n){window.location.hash="",n=n.split("h^").join("#"),n=JSON.parse(n),console.log(n);var r=n.function,a=n.parameter;try{a=JSON.parse(a)}catch(e){}var i,c=n.callback&&n.callback.file?n.callback.file:"",l=n.callback&&n.callback.script?n.callback.script:"";console.log("----\x3e function: "+r),console.log("----\x3e parameter:",a),console.log("----\x3e callback:",{file:c,script:l}),i=e[r]?e[r](a):{errorCode:-2,type:"WebViewerAPI",descriptor:"function not found: "+r};var u=function(e){console.log("RESULT",e),l&&("string"==typeof e||e instanceof String||(e=JSON.stringify(e)),o(c,l,e))};return i&&i.then&&"function"==typeof i.then?i.then(u):u(i)}console.log("----\x3e hash was empty")};return{addMethods:function(t){Object.assign(e,t)},start:function(){console.log("webviewer api listening"),window.addEventListener("hashchange",t,!1)},stop:function(){window.removeEventListener("hashchange",t,!1)}}},Object.defineProperty(e,"__esModule",{value:!0})}(t)}]);
//# sourceMappingURL=Carafe.bundle.js.map