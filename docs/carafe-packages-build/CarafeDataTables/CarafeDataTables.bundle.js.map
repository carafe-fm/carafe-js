{"version":3,"sources":["webpack://Carafe/webpack/bootstrap","webpack://Carafe/./es6/lib/Carafe.js","webpack://Carafe/./node_modules/fm-webviewer-bridge/dist/fm-webviewer-bridge.umd.js","webpack://Carafe/./carafe-packages-src/CarafeDataTables/Package.js","webpack://Carafe/./node_modules/headjs/dist/1.0.0/head.load.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","fmBridge","Carafe","_classCallCheck","this","instance","_data","_fmBridge","_isFileMakerWebViewer","_isJsFiddle","data","url","callback","xhr","XMLHttpRequest","open","responseType","onload","status","response","send","resource","head","load","js","getData","undefined","carafe","css","ready","_this","isFileMakerWebViewer","callCallback","getJSON","setData","assign","target","firstSource","arguments$1","arguments","TypeError","to","length","nextSource","keysArray","keys","nextIndex","len","nextKey","desc","getOwnPropertyDescriptor","es6ObjectAssign_2","configurable","writable","window","clipboardData","onerror","message","source","lineno","colno","error","errorDiv","document","createElement","title","innerHTML","appendChild","messageP","sourceP","indexOf","substring","ul","line","col","body","getElementsByTagName","setAttribute","initialProps","props","decodeURIComponent","location","hash","substr","JSON","parse","e","console","log","callFMScript","fileName","scriptName","parameter","encodeURIComponent","href","a","style","display","click","parentNode","removeChild","setTimeout","externalAPI","methods","apiListener","event","split","join","functionName","function","result","file","script","handleResult","String","stringify","errorCode","type","descriptor","then","addMethods","start","addEventListener","stop","removeEventListener","factory","_Carafe","win","isDomReady","doc","domWaiters","handlers","assets","isAsync","documentElement","opera","headVar","head_conf","api","apply","PRELOADING","PRELOADED","LOADING","LOADED","noop","each","arr","slice","is","obj","clas","toString","isFunction","item","isArray","one","_done","getAsset","items","asset","label","existing","allLoaded","state","preLoad","onpreload","loadAsset","afterPreload","onPreload","fn","ALL","push","ele","onreadystatechange","process","test","readyState","documentMode","clearTimeout","errorTimeout","cssTimeout","toLowerCase","rel","cssRetries","isCssLoaded","styleSheets","src","async","defer","insertBefore","lastChild","domReady","readyTimeout","dataMain","getAttribute","init","domContentLoaded","detachEvent","attachEvent","top","frameElement","doScroll","doScrollCheck","args","rest","next","success","failure","passed","feature"],"mappings":"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","file":"CarafeDataTables/CarafeDataTables.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 17);\n","\"use strict\";\n\nimport * as fmBridge from 'fm-webviewer-bridge'\nimport 'headjs/dist/1.0.0/head.load';\n\nexport default class Carafe {\n    constructor() {\n        if (!Carafe.instance) {\n            Carafe.instance = this;\n        }\n\n        this._data = {};\n        this._fmBridge = fmBridge;\n        this._isFileMakerWebViewer = false;\n        this._isJsFiddle = false;\n        return Carafe.instance;\n    }\n\n    setData(data) {\n        this._data = data;\n    }\n\n    setIsFileMakerWebViewer() {\n        this._isFileMakerWebViewer = true;\n    }\n\n    setIsJsFiddle() {\n        this._isJsFiddle = true;\n    }\n\n    isFileMakerWebViewer() {\n        return this._isFileMakerWebViewer;\n    }\n\n    getData() {\n        return this._data;\n    }\n\n    getFMBridge() {\n        return this._fmBridge;\n    }\n\n    getJSON(url, callback) {\n        let xhr = new XMLHttpRequest();\n        xhr.open('GET', url, true);\n        xhr.responseType = 'json';\n\n        xhr.onload = function () {\n            let status = xhr.status;\n\n            if (status === 200) {\n                callback(xhr.response);\n            } else {\n                // todo: deal with error\n                //alert(status);\n            }\n        };\n\n        xhr.send();\n    };\n\n    css(resource) {\n        return head.load(resource);\n    };\n\n    js(resource) {\n        return head.js(resource);\n    };\n\n    callCallback(callback) {\n        let data = this.getData();\n\n        if (!this._isJsFiddle) {\n            if (undefined !== data.carafe && undefined !== data.carafe.css) {\n                this.css(data.carafe.css)\n            }\n\n            if (undefined !== data.carafe && undefined !== data.carafe.js) {\n                this.js(data.carafe.js)\n            }\n        }\n\n        head.ready(() => {\n            callback(data);\n        });\n    };\n\n    ready(callback) {\n        head.ready(() => {\n            if (!this.isFileMakerWebViewer() && !this._isJsFiddle) {\n                this.getJSON('./ExampleData.json', (data) => {\n                    this.setData(data);\n                    this.callCallback(callback);\n                });\n            } else {\n                this.callCallback(callback);\n            }\n        });\n    }\n}\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.fm = {})));\n}(this, (function (exports) { 'use strict';\n\n  var attach = function () {\n    if (window.clipboardData) {\n      window.onerror = function(message, source, lineno, colno, error) {\n        var errorDiv = document.createElement(\"div\");\n        var title = document.createElement(\"h1\");\n        title.innerHTML = \"Error!\";\n        errorDiv.appendChild(title);\n        var messageP = document.createElement(\"p\");\n        messageP.innerHTML = message;\n        errorDiv.appendChild(messageP);\n        var sourceP = document.createElement(\"p\");\n        var n = source.indexOf(\"#\");\n        source = source.substring(0, n);\n        sourceP.innerHTML = source;\n        errorDiv.appendChild(sourceP);\n\n        var ul = document.createElement(\"ul\");\n        var line = document.createElement(\"li\");\n        line.innerHTML = \"line number: \" + lineno;\n        ul.appendChild(line);\n\n        var col = document.createElement(\"li\");\n        col.innerHTML = \"column number: \" + colno;\n        ul.appendChild(col);\n        errorDiv.appendChild(ul);\n        var body = document.getElementsByTagName(\"body\")[0];\n        errorDiv.setAttribute(\"style\", \"color:red; font-size:small\");\n        body.appendChild(errorDiv);\n      };\n    }\n  };\n\n  /**\n   * Code refactored from Mozilla Developer Network:\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n   */\n\n  function assign(target, firstSource) {\n    var arguments$1 = arguments;\n\n    if (target === undefined || target === null) {\n      throw new TypeError('Cannot convert first argument to object');\n    }\n\n    var to = Object(target);\n    for (var i = 1; i < arguments.length; i++) {\n      var nextSource = arguments$1[i];\n      if (nextSource === undefined || nextSource === null) {\n        continue;\n      }\n\n      var keysArray = Object.keys(Object(nextSource));\n      for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\n        var nextKey = keysArray[nextIndex];\n        var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n        if (desc !== undefined && desc.enumerable) {\n          to[nextKey] = nextSource[nextKey];\n        }\n      }\n    }\n    return to;\n  }\n\n  function polyfill() {\n    if (!Object.assign) {\n      Object.defineProperty(Object, 'assign', {\n        enumerable: false,\n        configurable: true,\n        writable: true,\n        value: assign\n      });\n    }\n  }\n\n  var es6ObjectAssign = {\n    assign: assign,\n    polyfill: polyfill\n  };\n  var es6ObjectAssign_2 = es6ObjectAssign.polyfill;\n\n  //attatch a windows error handler to make it easier to see errors on windows\n  attach();\n  es6ObjectAssign_2();\n\n  /**\n   * returns the props attached at startup\n   */\n  var initialProps = (function () {\n    var props = decodeURIComponent(location.hash.substr(1));\n    try {\n      props = JSON.parse(props);\n    } catch (e) {}\n    console.log(\"initialProps\");\n    console.log(props);\n    return props;\n  })();\n\n  /**\n   * @param {string} fileName the name of the file that has the script\n   * @param {string} scriptName the name ofthe script to call\n   * @param {object|string} data an object or string containing the data to send as the parameter\n   */\n  var callFMScript = function (fileName, scriptName, data, callback) {\n    var parameter = encodeURIComponent(data);\n    console.log(\"calling FM script\", scriptName);\n    console.log(\"---->file\", fileName);\n    console.log(\"---->parameter!\", data);\n\n    if (parameter.length > 1000 && window.clipboardData) {\n      window.clipboardData.setData(\"Text\", data);\n      parameter = \"giant\";\n    }\n\n    var url =\n      \"fmp://$/\" + fileName + \"?script=\" + scriptName + \"&param=\" + parameter;\n\n    //window.location = url;\n    var href = window.location.href;\n    var body = document.getElementsByTagName(\"body\")[0];\n    var a = document.createElement(\"a\");\n    a.href = url;\n    a.style.display = \"none\";\n    body.appendChild(a);\n    a.click();\n    a.parentNode.removeChild(a);\n\n    //IE FIX\n    if (href.indexOf(\"#\") > -1) {\n      setTimeout(function() {\n        window.location.href = href;\n      }, 1);\n    }\n  };\n\n  /**\n   * Turns the API on\n   * @param {object} [methods={}] object containing a key for each function to expose\n   */\n  var externalAPI = function (methods) {\n    if ( methods === void 0 ) methods = {};\n\n    var apiListener = function (event) {\n      console.log(\"hash changed\");\n      // eslint-disable-next-line no-restricted-globals\n      var hash = decodeURIComponent(location.hash.substr(1));\n      if (window.clipboardData && hash === \"giant\") {\n        hash = window.clipboardData.getData(\"Text\");\n        hash = hash.substr(1);\n      }\n\n      if (!hash) {\n        console.log(\"----> hash was empty\");\n        return;\n      }\n      //const href = window.location.href;\n\n      window.location.hash = \"\"; // clear this for the next call\n\n      hash = hash.split(\"h^\").join(\"#\");\n      hash = JSON.parse(hash);\n      console.log(hash);\n\n      var functionName = hash.function;\n\n      var parameter = hash.parameter;\n      try {\n        parameter = JSON.parse(parameter);\n      } catch (e) {}\n      var file = hash.callback\n        ? hash.callback.file ? hash.callback.file : \"\"\n        : \"\";\n      var script = hash.callback\n        ? hash.callback.script ? hash.callback.script : \"\"\n        : \"\";\n\n      console.log(\"----> function: \" + functionName);\n      console.log(\"----> parameter:\", parameter);\n      console.log(\"----> callback:\", { file: file, script: script });\n      var result;\n      if (methods[functionName]) {\n        result = methods[functionName](parameter);\n      } else {\n        result = {\n          errorCode: -2,\n          type: \"WebViewerAPI\",\n          descriptor: \"function not found: \" + functionName\n        };\n      }\n\n      var handleResult = function (result) {\n        console.log(\"RESULT\", result);\n        if (script) {\n          if (typeof result === \"string\" || result instanceof String) {\n            //no-op\n          } else {\n            result = JSON.stringify(result);\n          }\n\n          callFMScript(file, script, result);\n        }\n      };\n\n      if (result && result.then && typeof result.then === \"function\") {\n        // the result was a promise\n        return result.then(handleResult);\n      } else {\n        return handleResult(result);\n      }\n    };\n    return {\n      /**\n       * add more methods to the API\n       * @param {object} object an object with keys for each function/method to add\n       */\n      addMethods: function (object) {\n        Object.assign(methods, object);\n      },\n      /**\n       * start the API listening for events on Hash change\n       */\n      start: function () {\n        // eslint-disable-next-line no-restricted-globals\n        console.log(\"webviewer api listening\");\n        window.addEventListener(\"hashchange\", apiListener, false);\n      },\n      /**\n       * remove the listeners\n       */\n      stop: function () {\n        // eslint-disable-next-line no-restricted-globals\n        window.removeEventListener(\"hashchange\", apiListener, false);\n      }\n    };\n  };\n\n  exports.initialProps = initialProps;\n  exports.callFMScript = callFMScript;\n  exports.externalAPI = externalAPI;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","\"use strict\";\n\nimport Carafe from '../../es6/lib/Carafe';\nconst instance = new Carafe();\nmodule.exports = instance;\n","///#source 1 1 /src/1.0.0/load.js\n/*! head.load - v1.0.3 */\n/*\n * HeadJS     The only script in your <HEAD>\n * Author     Tero Piirainen  (tipiirai)\n * Maintainer Robert Hoffmann (itechnology)\n * License    MIT / http://bit.ly/mit-license\n * WebSite    http://headjs.com\n */\n(function (win, undefined) {\n    \"use strict\";\n\n    //#region variables\n    var doc        = win.document,\n        domWaiters = [],\n        handlers   = {}, // user functions waiting for events\n        assets     = {}, // loadable items in various states\n        isAsync    = \"async\" in doc.createElement(\"script\") || \"MozAppearance\" in doc.documentElement.style || win.opera,\n        isDomReady,\n\n        /*** public API ***/\n        headVar = win.head_conf && win.head_conf.head || \"head\",\n        api     = win[headVar] = (win[headVar] || function () { api.ready.apply(null, arguments); }),\n\n        // states\n        PRELOADING = 1,\n        PRELOADED  = 2,\n        LOADING    = 3,\n        LOADED     = 4;\n    //#endregion\n\n    //#region PRIVATE functions\n\n    //#region Helper functions\n    function noop() {\n        // does nothing\n    }\n\n    function each(arr, callback) {\n        if (!arr) {\n            return;\n        }\n\n        // arguments special type\n        if (typeof arr === \"object\") {\n            arr = [].slice.call(arr);\n        }\n\n        // do the job\n        for (var i = 0, l = arr.length; i < l; i++) {\n            callback.call(arr, arr[i], i);\n        }\n    }\n\n    /* A must read: http://bonsaiden.github.com/JavaScript-Garden\n     ************************************************************/\n    function is(type, obj) {\n        var clas = Object.prototype.toString.call(obj).slice(8, -1);\n        return obj !== undefined && obj !== null && clas === type;\n    }\n\n    function isFunction(item) {\n        return is(\"Function\", item);\n    }\n\n    function isArray(item) {\n        return is(\"Array\", item);\n    }\n\n    function toLabel(url) {\n        ///<summary>Converts a url to a file label</summary>\n        var items = url.split(\"/\"),\n             name = items[items.length - 1],\n             i    = name.indexOf(\"?\");\n\n        return i !== -1 ? name.substring(0, i) : name;\n    }\n\n    // INFO: this look like a \"im triggering callbacks all over the place, but only wanna run it one time function\" ..should try to make everything work without it if possible\n    // INFO: Even better. Look into promises/defered's like jQuery is doing\n    function one(callback) {\n        ///<summary>Execute a callback only once</summary>\n        callback = callback || noop;\n\n        if (callback._done) {\n            return;\n        }\n\n        callback();\n        callback._done = 1;\n    }\n    //#endregion\n\n    function conditional(test, success, failure, callback) {\n        ///<summary>\n        /// INFO: use cases:\n        ///    head.test(condition, null       , \"file.NOk\" , callback);\n        ///    head.test(condition, \"fileOk.js\", null       , callback);\n        ///    head.test(condition, \"fileOk.js\", \"file.NOk\" , callback);\n        ///    head.test(condition, \"fileOk.js\", [\"file.NOk\", \"file.NOk\"], callback);\n        ///    head.test({\n        ///               test    : condition,\n        ///               success : [{ label1: \"file1Ok.js\"  }, { label2: \"file2Ok.js\" }],\n        ///               failure : [{ label1: \"file1NOk.js\" }, { label2: \"file2NOk.js\" }],\n        ///               callback: callback\n        ///    );\n        ///    head.test({\n        ///               test    : condition,\n        ///               success : [\"file1Ok.js\" , \"file2Ok.js\"],\n        ///               failure : [\"file1NOk.js\", \"file2NOk.js\"],\n        ///               callback: callback\n        ///    );\n        ///</summary>\n        var obj = (typeof test === \"object\") ? test : {\n            test: test,\n            success: !!success ? isArray(success) ? success : [success] : false,\n            failure: !!failure ? isArray(failure) ? failure : [failure] : false,\n            callback: callback || noop\n        };\n\n        // Test Passed ?\n        var passed = !!obj.test;\n\n        // Do we have a success case\n        if (passed && !!obj.success) {\n            obj.success.push(obj.callback);\n            api.load.apply(null, obj.success);\n        }\n        // Do we have a fail case\n        else if (!passed && !!obj.failure) {\n            obj.failure.push(obj.callback);\n            api.load.apply(null, obj.failure);\n        }\n        else {\n            callback();\n        }\n\n        return api;\n    }\n\n    function getAsset(item) {\n        ///<summary>\n        /// Assets are in the form of\n        /// {\n        ///     name : label,\n        ///     url  : url,\n        ///     state: state\n        /// }\n        ///</summary>\n        var asset = {};\n\n        if (typeof item === \"object\") {\n            for (var label in item) {\n                if (!!item[label]) {\n                    asset = {\n                        name: label,\n                        url : item[label]\n                    };\n                }\n            }\n        }\n        else {\n            asset = {\n                name: toLabel(item),\n                url : item\n            };\n        }\n\n        // is the item already existant\n        var existing = assets[asset.name];\n        if (existing && existing.url === asset.url) {\n            return existing;\n        }\n\n        assets[asset.name] = asset;\n        return asset;\n    }\n\n    function allLoaded(items) {\n        items = items || assets;\n\n        for (var name in items) {\n            if (items.hasOwnProperty(name) && items[name].state !== LOADED) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    function onPreload(asset) {\n        asset.state = PRELOADED;\n\n        each(asset.onpreload, function (afterPreload) {\n            afterPreload.call();\n        });\n    }\n\n    function preLoad(asset, callback) {\n        if (asset.state === undefined) {\n\n            asset.state     = PRELOADING;\n            asset.onpreload = [];\n\n            loadAsset({ url: asset.url, type: \"cache\" }, function () {\n                onPreload(asset);\n            });\n        }\n    }\n\n    function apiLoadHack() {\n        /// <summary>preload with text/cache hack\n        ///\n        /// head.load(\"http://domain.com/file.js\",\"http://domain.com/file.js\", callBack)\n        /// head.load([\"http://domain.com/file.js\",\"http://domain.com/file.js\"], callBack)\n        /// head.load({ label1: \"http://domain.com/file.js\" }, { label2: \"http://domain.com/file.js\" }, callBack)\n        /// head.load([{ label1: \"http://domain.com/file.js\" }, { label2: \"http://domain.com/file.js\" }], callBack)\n        /// </summary>\n        var args     = arguments,\n            callback = args[args.length - 1],\n            rest     = [].slice.call(args, 1),\n            next     = rest[0];\n\n        if (!isFunction(callback)) {\n            callback = null;\n        }\n\n        // if array, repush as args\n        if (isArray(args[0])) {\n            args[0].push(callback);\n            api.load.apply(null, args[0]);\n\n            return api;\n        }\n\n        // multiple arguments\n        if (!!next) {\n            /* Preload with text/cache hack (not good!)\n             * http://blog.getify.com/on-script-loaders/\n             * http://www.nczonline.net/blog/2010/12/21/thoughts-on-script-loaders/\n             * If caching is not configured correctly on the server, then items could load twice !\n             *************************************************************************************/\n            each(rest, function (item) {\n                // item is not a callback or empty string\n                if (!isFunction(item) && !!item) {\n                    preLoad(getAsset(item));\n                }\n            });\n\n            // execute\n            load(getAsset(args[0]), isFunction(next) ? next : function () {\n                api.load.apply(null, rest);\n            });\n        }\n        else {\n            // single item\n            load(getAsset(args[0]));\n        }\n\n        return api;\n    }\n\n    function apiLoadAsync() {\n        ///<summary>\n        /// simply load and let browser take care of ordering\n        ///\n        /// head.load(\"http://domain.com/file.js\",\"http://domain.com/file.js\", callBack)\n        /// head.load([\"http://domain.com/file.js\",\"http://domain.com/file.js\"], callBack)\n        /// head.load({ label1: \"http://domain.com/file.js\" }, { label2: \"http://domain.com/file.js\" }, callBack)\n        /// head.load([{ label1: \"http://domain.com/file.js\" }, { label2: \"http://domain.com/file.js\" }], callBack)\n        ///</summary>\n        var args     = arguments,\n            callback = args[args.length - 1],\n            items    = {};\n\n        if (!isFunction(callback)) {\n            callback = null;\n        }\n\n        // if array, repush as args\n        if (isArray(args[0])) {\n            args[0].push(callback);\n            api.load.apply(null, args[0]);\n\n            return api;\n        }\n\n        // JRH 262#issuecomment-26288601\n        // First populate the items array.\n        // When allLoaded is called, all items will be populated.\n        // Issue when lazy loaded, the callback can execute early.\n        each(args, function (item, i) {\n            if (item !== callback) {\n                item             = getAsset(item);\n                items[item.name] = item;\n            }\n        });\n\n        each(args, function (item, i) {\n            if (item !== callback) {\n                item = getAsset(item);\n\n                load(item, function () {\n                    if (allLoaded(items)) {\n                        one(callback);\n                    }\n                });\n            }\n        });\n\n        return api;\n    }\n\n    function load(asset, callback) {\n        ///<summary>Used with normal loading logic</summary>\n        callback = callback || noop;\n\n        if (asset.state === LOADED) {\n            callback();\n            return;\n        }\n\n        // INFO: why would we trigger a ready event when its not really loaded yet ?\n        if (asset.state === LOADING) {\n            api.ready(asset.name, callback);\n            return;\n        }\n\n        if (asset.state === PRELOADING) {\n            asset.onpreload.push(function () {\n                load(asset, callback);\n            });\n            return;\n        }\n\n        asset.state = LOADING;\n\n        loadAsset(asset, function () {\n            asset.state = LOADED;\n\n            callback();\n\n            // handlers for this asset\n            each(handlers[asset.name], function (fn) {\n                one(fn);\n            });\n\n            // dom is ready & no assets are queued for loading\n            // INFO: shouldn't we be doing the same test above ?\n            if (isDomReady && allLoaded()) {\n                each(handlers.ALL, function (fn) {\n                    one(fn);\n                });\n            }\n        });\n    }\n\n    function getExtension(url) {\n        url = url || \"\";\n\n        var items = url.split(\"?\")[0].split(\".\");\n        return items[items.length-1].toLowerCase();\n    }\n\n    /* Parts inspired from: https://github.com/cujojs/curl\n    ******************************************************/\n    function loadAsset(asset, callback) {\n        callback = callback || noop;\n\n        function error(event) {\n            event = event || win.event;\n\n            // release event listeners\n            ele.onload = ele.onreadystatechange = ele.onerror = null;\n\n            // do callback\n            callback();\n\n            // need some more detailed error handling here\n        }\n\n        function process(event) {\n            event = event || win.event;\n\n            // IE 7/8 (2 events on 1st load)\n            // 1) event.type = readystatechange, s.readyState = loading\n            // 2) event.type = readystatechange, s.readyState = loaded\n\n            // IE 7/8 (1 event on reload)\n            // 1) event.type = readystatechange, s.readyState = complete\n\n            // event.type === 'readystatechange' && /loaded|complete/.test(s.readyState)\n\n            // IE 9 (3 events on 1st load)\n            // 1) event.type = readystatechange, s.readyState = loading\n            // 2) event.type = readystatechange, s.readyState = loaded\n            // 3) event.type = load            , s.readyState = loaded\n\n            // IE 9 (2 events on reload)\n            // 1) event.type = readystatechange, s.readyState = complete\n            // 2) event.type = load            , s.readyState = complete\n\n            // event.type === 'load'             && /loaded|complete/.test(s.readyState)\n            // event.type === 'readystatechange' && /loaded|complete/.test(s.readyState)\n\n            // IE 10 (3 events on 1st load)\n            // 1) event.type = readystatechange, s.readyState = loading\n            // 2) event.type = load            , s.readyState = complete\n            // 3) event.type = readystatechange, s.readyState = loaded\n\n            // IE 10 (3 events on reload)\n            // 1) event.type = readystatechange, s.readyState = loaded\n            // 2) event.type = load            , s.readyState = complete\n            // 3) event.type = readystatechange, s.readyState = complete\n\n            // event.type === 'load'             && /loaded|complete/.test(s.readyState)\n            // event.type === 'readystatechange' && /complete/.test(s.readyState)\n\n            // Other Browsers (1 event on 1st load)\n            // 1) event.type = load, s.readyState = undefined\n\n            // Other Browsers (1 event on reload)\n            // 1) event.type = load, s.readyState = undefined\n\n            // event.type == 'load' && s.readyState = undefined\n\n            // !doc.documentMode is for IE6/7, IE8+ have documentMode\n            if (event.type === \"load\" || (/loaded|complete/.test(ele.readyState) && (!doc.documentMode || doc.documentMode < 9))) {\n                // remove timeouts\n                win.clearTimeout(asset.errorTimeout);\n                win.clearTimeout(asset.cssTimeout);\n\n                // release event listeners\n                ele.onload = ele.onreadystatechange = ele.onerror = null;\n\n                // do callback   \n                callback();\n            }\n        }\n\n        function isCssLoaded() {\n            // should we test again ? 20 retries = 5secs ..after that, the callback will be triggered by the error handler at 7secs\n            if (asset.state !== LOADED && asset.cssRetries <= 20) {\n\n                // loop through stylesheets\n                for (var i = 0, l = doc.styleSheets.length; i < l; i++) {\n                    // do we have a match ?\n                    // we need to tests agains ele.href and not asset.url, because a local file will be assigned the full http path on a link element\n                    if (doc.styleSheets[i].href === ele.href) {\n                        process({ \"type\": \"load\" });\n                        return;\n                    }\n                }\n\n                // increment & try again\n                asset.cssRetries++;\n                asset.cssTimeout = win.setTimeout(isCssLoaded, 250);\n            }\n        }\n\n        var ele;\n        var ext = getExtension(asset.url);\n\n        if (ext === \"css\") {\n            ele      = doc.createElement(\"link\");\n            ele.type = \"text/\" + (asset.type || \"css\");\n            ele.rel  = \"stylesheet\";\n            ele.href = asset.url;\n\n            /* onload supported for CSS on unsupported browsers\n             * Safari windows 5.1.7, FF < 10\n             */\n\n            // Set counter to zero\n            asset.cssRetries = 0;\n            asset.cssTimeout = win.setTimeout(isCssLoaded, 500);         \n        }\n        else {\n            ele      = doc.createElement(\"script\");\n            ele.type = \"text/\" + (asset.type || \"javascript\");\n            ele.src = asset.url;\n        }\n\n        ele.onload  = ele.onreadystatechange = process;\n        ele.onerror = error;\n\n        /* Good read, but doesn't give much hope !\n         * http://blog.getify.com/on-script-loaders/\n         * http://www.nczonline.net/blog/2010/12/21/thoughts-on-script-loaders/\n         * https://hacks.mozilla.org/2009/06/defer/\n         */\n\n        // ASYNC: load in parallel and execute as soon as possible\n        ele.async = false;\n        // DEFER: load in parallel but maintain execution order\n        ele.defer = false;\n\n        // timout for asset loading\n        asset.errorTimeout = win.setTimeout(function () {\n            error({ type: \"timeout\" });\n        }, 7e3);\n\n        // use insertBefore to keep IE from throwing Operation Aborted (thx Bryan Forbes!)\n        var head = doc.head || doc.getElementsByTagName(\"head\")[0];\n\n        // but insert at end of head, because otherwise if it is a stylesheet, it will not override values      \n        head.insertBefore(ele, head.lastChild);\n    }\n\n    /* Parts inspired from: https://github.com/jrburke/requirejs\n    ************************************************************/\n    function init() {\n        var items = doc.getElementsByTagName(\"script\");\n\n        // look for a script with a data-head-init attribute\n        for (var i = 0, l = items.length; i < l; i++) {\n            var dataMain = items[i].getAttribute(\"data-headjs-load\");\n            if (!!dataMain) {\n                api.load(dataMain);\n                return;\n            }\n        }\n    }\n\n    function ready(key, callback) {\n        ///<summary>\n        /// INFO: use cases:\n        ///    head.ready(callBack);\n        ///    head.ready(document , callBack);\n        ///    head.ready(\"file.js\", callBack);\n        ///    head.ready(\"label\"  , callBack);\n        ///    head.ready([\"label1\", \"label2\"], callback);\n        ///</summary>\n\n        // DOM ready check: head.ready(document, function() { });\n        if (key === doc) {\n            if (isDomReady) {\n                one(callback);\n            }\n            else {\n                domWaiters.push(callback);\n            }\n\n            return api;\n        }\n\n        // shift arguments\n        if (isFunction(key)) {\n            callback = key;\n            key      = \"ALL\"; // holds all callbacks that where added without labels: ready(callBack)\n        }\n\n        // queue all items from key and return. The callback will be executed if all items from key are already loaded.\n        if (isArray(key)) {\n            var items = {};\n\n            each(key, function (item) {\n                items[item] = assets[item];\n\n                api.ready(item, function() {\n                    if (allLoaded(items)) {\n                        one(callback);\n                    }\n                });\n            });\n\n            return api;\n        }\n\n        // make sure arguments are sane\n        if (typeof key !== \"string\" || !isFunction(callback)) {\n            return api;\n        }\n\n        // this can also be called when we trigger events based on filenames & labels\n        var asset = assets[key];\n\n        // item already loaded --> execute and return\n        if (asset && asset.state === LOADED || key === \"ALL\" && allLoaded() && isDomReady) {\n            one(callback);\n            return api;\n        }\n\n        var arr = handlers[key];\n        if (!arr) {\n            arr = handlers[key] = [callback];\n        }\n        else {\n            arr.push(callback);\n        }\n\n        return api;\n    }\n\n    /* Mix of stuff from jQuery & IEContentLoaded\n     * http://dev.w3.org/html5/spec/the-end.html#the-end\n     ***************************************************/\n    function domReady() {\n        // Make sure body exists, at least, in case IE gets a little overzealous (jQuery ticket #5443).\n        if (!doc.body) {\n            // let's not get nasty by setting a timeout too small.. (loop mania guaranteed if assets are queued)\n            win.clearTimeout(api.readyTimeout);\n            api.readyTimeout = win.setTimeout(domReady, 50);\n            return;\n        }\n\n        if (!isDomReady) {\n            isDomReady = true;\n\n            init();\n            each(domWaiters, function (fn) {\n                one(fn);\n            });\n        }\n    }\n\n    function domContentLoaded() {\n        // W3C\n        if (doc.addEventListener) {\n            doc.removeEventListener(\"DOMContentLoaded\", domContentLoaded, false);\n            domReady();\n        }\n\n        // IE\n        else if (doc.readyState === \"complete\") {\n            // we're here because readyState === \"complete\" in oldIE\n            // which is good enough for us to call the dom ready!\n            doc.detachEvent(\"onreadystatechange\", domContentLoaded);\n            domReady();\n        }\n    }\n\n    // Catch cases where ready() is called after the browser event has already occurred.\n    // we once tried to use readyState \"interactive\" here, but it caused issues like the one\n    // discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15\n    if (doc.readyState === \"complete\") {\n        domReady();\n    }\n\n    // W3C\n    else if (doc.addEventListener) {\n        doc.addEventListener(\"DOMContentLoaded\", domContentLoaded, false);\n\n        // A fallback to window.onload, that will always work\n        win.addEventListener(\"load\", domReady, false);\n    }\n\n    // IE\n    else {\n        // Ensure firing before onload, maybe late but safe also for iframes\n        doc.attachEvent(\"onreadystatechange\", domContentLoaded);\n\n        // A fallback to window.onload, that will always work\n        win.attachEvent(\"onload\", domReady);\n\n        // If IE and not a frame\n        // continually check to see if the document is ready\n        var top = false;\n\n        try {\n            top = !win.frameElement && doc.documentElement;\n        } catch (e) { }\n\n        if (top && top.doScroll) {\n            (function doScrollCheck() {\n                if (!isDomReady) {\n                    try {\n                        // Use the trick by Diego Perini\n                        // http://javascript.nwbox.com/IEContentLoaded/\n                        top.doScroll(\"left\");\n                    } catch (error) {\n                        // let's not get nasty by setting a timeout too small.. (loop mania guaranteed if assets are queued)\n                        win.clearTimeout(api.readyTimeout);\n                        api.readyTimeout = win.setTimeout(doScrollCheck, 50);\n                        return;\n                    }\n\n                    // and execute any waiting functions\n                    domReady();\n                }\n            }());\n        }\n    }\n    //#endregion\n\n    //#region Public Exports\n    // INFO: determine which method to use for loading\n    api.load  = api.js = isAsync ? apiLoadAsync : apiLoadHack;\n    api.test  = conditional;\n    api.ready = ready;\n    //#endregion\n\n    //#region INIT\n    // perform this when DOM is ready\n    api.ready(doc, function () {\n        if (allLoaded()) {\n            each(handlers.ALL, function (callback) {\n                one(callback);\n            });\n        }\n\n        if (api.feature) {\n            api.feature(\"domloaded\", true);\n        }\n    });\n    //#endregion\n}(window));\n"],"sourceRoot":""}